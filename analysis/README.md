## Summative Analysis
Data for Phase 1: [OneDrive](https://northeastern-my.sharepoint.com/:f:/r/personal/v_dasswain_northeastern_edu/Documents/ProPilot/Summative/part1?csf=1&web=1&e=n7LGBA)

### Comparison of Empathatic Reframing between Human and AI

We need to compare the empathetic reframing messages generated by human participants and the empathetic reframing agent. 
Messages should be compared for the same incident. 

1. Human Messages: `empathetic_msg_human.tsv`
   Every message here is generated by a human participant who has experience in a front-office role that involves computer-mediated communication with customers.
   Generated from `summative_writing.tsv` by retaining only approved responses and sanitizing the data: removed responses that did not follow the instruction, paraphrased the responses that contain terms of endearment ("dear" or "girl"), sign-off messages ("best regards"), or any preface content ("I would say...").
   - `_id`: Unique identifier for each row
   - `user_id`: Unique identifier for the participant based on Prolific ID
   - `incident_id`: Unique identifier for the incident matches `ID` in `phase1_scenarios.tsv`
   - `scenario_num`: 0-5; no-context [0,1], behavior context [2,3], personality context [4,5]
   - `empathetic_msg`: Empathetic reframing message written by participant
   - `context_behav`: Randomly assigned out of 3 possible contexts for scenario [2,3]. Null for others.
   - `context_pers`: Assigned by participant self-report out of 3 possible contexts for scenario [4,5]. Null for others.

2. AI Messages: `empathetic_msg_ai_v2.tsv`
   Every message here is generated by the empathetic reframing agent.
   It contains 7 messages per incident, 1 without context, 3 with behavior context, and 3 with personality context.
   - `user_id`: Always says "system"
   - `incident_id`: Unique identifier for the incident matches `ID` in `phase1_scenarios.tsv`
   - `empathetic_msg`: Empathetic reframing message written by participant
   - `context_behv`: Randomly assigned out of 3 possible behaviors.
   - `context_pers`: ARandomly assigned out of 3 possible personalities.

### Supplementary Data

1. Incidents: `phase1_scenarios.tsv`:
    - 3 scenario per domain per category
    - Each row involves the following:
      - `ID` : 1-45 unique identifiers
      - `Domain` : `mobile-device, airlines, hotel`
      - `Category` : `Product, Service, Pricing, Policy, Resolution`
      - `Initial Complaint` : Initial complaint by the customer
      - `Support Agent Response 1`: Response by the support agent
      - `Follow-up Complaint 1`: Customer follow-up
      - `Support Agent Response 2`: Response by the support agent
      - `Follow-up Complaint 2`: Customer follow-up

To generate a reframing for any incident, use the following:
```python
import agents_validation as av
from langchain_core.messages import AIMessage, HumanMessage
import pandas as pd

incidents_df = pd.read_csv('phase1_scenarios.tsv', sep='\t')

emo_agent = av.mAgentER_validation()
incident_row = incidents_df.sample().iloc[0]

chat_history = [
    AIMessage(content="Client: "+incident_row['Initial Complaint']),
    HumanMessage(content="Representative: "+incident_row['Support Agent Response 1']),
    AIMessage(content="Client: "+incident_row['Follow-up Complaint 1']),
    HumanMessage(content="Representative: "+incident_row['Support Agent Response 2'])
]
reply = incident_row['Follow-up Complaint 2']
response_cw_emo = emo_agent.invoke({'complaint':reply, "chat_history": chat_history})
```

2. Participants:`prolific_demographic_phase1.csv`
    - Details of prolific participants
    - `Participant id`: Unique identifier for Prolific ID
    - `Status`: Only keep 116 participants with status `AWAITING REVIEW`, other participants are screened out or rejected
    - Other demographic details for data transparency

3. Writing task: `summative_writing.tsv`
   - Only retains responses for the 116 participants
   - `incident_id`: Unique identifier for the incident matches `ID` in `phase1_scenarios.tsv`
   - `scenario_num`: 0-5; no-context [0,1], behavior context [2,3], personality context [4,5]
   - `dat3`: Thought generated by the participant on vieiwing the incident
   - `dat4`: Empathetic reframing message written by participant
   - `context_behav`: Randomly assigned out of 3 possible contexts for [2,3]. Null for others.
   - `context_pers`: Assigned by participant self-report out of 3 possible contexts for [4,5]. Null for others.

